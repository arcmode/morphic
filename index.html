<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-08 Sat 14:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>@frameless</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="David Rojas" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://drojas.github.io/org-html-dracula/styles/org.css">
<link rel="stylesheet" type="text/css" href="styles/org.css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">@frameless</h1>
<div class="abstract">
<p>
Boilerplate code is an underrated problem: one-time chunks of non-reusable code and other necessary evils that are usually
abstracted away as a mixture of scaffolding, library code and configuration are cheap to buy but can come as very
expensive to replace later on. There is accidental complexity in most if not all boilerplate code around any <i>main</i> function or any source
code module that depends on a library or framework. This document describes a generalization of the <i>serverless</i> pattern and describes it as
the <i>frameless</i> pattern. The generalization is driven by the application of <i>separation of concerns</i> between module and system domains.
The PoC project in TypeScript introduces a <i>RESTful</i> module/system contracts with zero boilerplate and zero dependency on frameworks in the
modules source code.
Additionally, it is discussed how this pattern can facilitate evolution and co-evolution of product and platform streams of work within the dynamics
of the agile organization model.
</p>

</div>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgafb0651">1. TL;DR;</a>
<ul>
<li><a href="#org573b369">1.1. Frameless signature</a></li>
</ul>
</li>
<li><a href="#orga45ed2c">2. Why modeling modularity matters</a>
<ul>
<li><a href="#org897a66b">2.1. Separation of concerns</a></li>
<li><a href="#org07ec58e">2.2. Evolvability</a></li>
<li><a href="#org018491e">2.3. Consistency</a></li>
<li><a href="#org09f7cd6">2.4. Cycle time</a></li>
</ul>
</li>
<li><a href="#org737e308">3. How</a>
<ul>
<li><a href="#org36b0aa2">3.1. <span class="todo TODO">TODO</span> MVP: Basic module systems</a></li>
<li><a href="#org2a3ad98">3.2. Vision for v1.0</a></li>
</ul>
</li>
<li><a href="#org9bce83e">4. Wishlist</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgafb0651" class="outline-2">
<h2 id="orgafb0651"><span class="section-number-2">1</span> TL;DR;</h2>
<div class="outline-text-2" id="text-1">
<p>
A frameless pattern is the result of applying separation of concerns between modular functionality and boilerplate code.
It replaces API dependency code and any boilerplate by leveraging contracts that task the platform to provide development and
production scripts to test, run, debug, deploy, package, build or any arbitrary task.
</p>
</div>

<div id="outline-container-org573b369" class="outline-3">
<h3 id="org573b369"><span class="section-number-3">1.1</span> Frameless signature</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Zero boilerplate</li>
<li>Zero module dependency on platform API</li>
</ul>

<p>
The frameless pattern is a generalization of the <i>serverless</i> or <i>function-as-a-service</i> pattern.
</p>
</div>
</div>
</div>

<div id="outline-container-orga45ed2c" class="outline-2">
<h2 id="orga45ed2c"><span class="section-number-2">2</span> Why modeling modularity matters</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org897a66b" class="outline-3">
<h3 id="org897a66b"><span class="section-number-3">2.1</span> Separation of concerns</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Most projects grow in a modular pace, adding new features incrementally to do the work that is required.
Also, most projects work on top of a given platform, <i>composed</i> by the set of languages, frameworks and libraries that together provide at least
one and sometimes several modularity models from which most projects pick one for each kind of module (job, route, library, DOM component, cli, etc).
By defining module models a separation between module concerns and system concerns is enforced by design.
</p>
</div>
</div>

<div id="outline-container-org07ec58e" class="outline-3">
<h3 id="org07ec58e"><span class="section-number-3">2.2</span> Evolvability</h3>
<div class="outline-text-3" id="text-2-2">
<p>
In modular software, any code-editing required to <i>migrate</i> a given module into a different <i>framework</i> can be considered evitable
and patterns that add work to that task can be considered anti-patterns.
Having a module model decouples product features from platform (see previous point about separation of concerns and modularity). Being able to
work on platform features without blocking product stories is highly desirable. Collaboration in parallel is facilitated by the module contract serving
as reference for both sides.
</p>
</div>
</div>

<div id="outline-container-org018491e" class="outline-3">
<h3 id="org018491e"><span class="section-number-3">2.3</span> Consistency</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Most web projects require significant boilerplate code in order to run production applications. One of the most obvios properties 
of modular systems is the bigger number of running programs. The combination of modularity with patterns and tools that increase
boilerplate code creates a space for inconsistency that affects modular systems as they adopt new features and behavior not
yet defined within the "boilerplate-free" area of library and framework code.
</p>
</div>
</div>

<div id="outline-container-org09f7cd6" class="outline-3">
<h3 id="org09f7cd6"><span class="section-number-3">2.4</span> Cycle time</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Short and predictable cycle times are an important contributing factor to the success of agile teams. During development, having a defined modularity model
makes the work in solutions space more predictable. Also, a minimal contract reduces the amount of glue-code which makes modules leaner.
If adopting new technology involves touching the internal modules of a project then innovation faces resistance as it can easily disrupt agile workflows.
</p>
</div>
</div>
</div>

<div id="outline-container-org737e308" class="outline-2">
<h2 id="org737e308"><span class="section-number-2">3</span> How</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgc3e95b8" class="outline-4">
<h4 id="orgc3e95b8">Modularity Model</h4>
<div class="outline-text-4" id="text-orgc3e95b8">
<p>
Let's pretend we are going to start a new project. Instead of going through the usual ritual of:
</p>

<ol class="org-ol">
<li>Select framework and libraries</li>
<li>Write some boilerplate code</li>
<li>Implement a set of modules following the modularity model from framework</li>
</ol>

<p>
Let's try the frameless approach:
</p>

<ol class="org-ol">
<li>Define modularity model via a <i>platform</i> function: <code>platform : modules -&gt; features</code></li>
<li>Implement the platform function as a thin wrapper that can include a module as part of predefined boilerplate</li>
<li>Define boilerplate according to <i>your</i> platform</li>
<li>Implement set of modules following <i>your</i> modularity model</li>
</ol>

<p>
Let's imagine for example a common kind of project for "web" projects: Rest API in NodeJS.
</p>

<p>
Let's define our <i>Rest module</i> model in TypeScript trying to achieve the <i>minimum viable interface</i>
required to know what the module <i>does</i> in the context of the specific project (Rest API).
</p>

<p>
A Rest module must define a url and method.
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">export</span> <span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">url</span> = <span style="color: #f1fa8c;">'/hello-rest/:name'</span>
<span style="color: #ff79c6;">export</span> <span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">method</span> = <span style="color: #f1fa8c;">'GET'</span>
</pre>
</div>

<p>
Also, it must define a <i>schema</i>.
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">export</span> <span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">schema</span> = <span style="color: #61bfff;">{</span>
    response: <span style="color: #ff79c6;">{</span>
        <span style="color: #ff5555; font-weight: bold;">200</span>: <span style="color: #50fa7b;">{</span>
            <span style="color: #ff79c6;">type</span>: <span style="color: #f1fa8c;">'object'</span>,
            properties: <span style="color: #ffb86c;">{</span>
                greetings: <span style="color: #bd93f9;">{</span>
                    <span style="color: #ff79c6;">type</span>: <span style="color: #f1fa8c;">'string'</span>
                <span style="color: #bd93f9;">}</span>
            <span style="color: #ffb86c;">}</span>
        <span style="color: #50fa7b;">}</span>,
        <span style="color: #ff5555; font-weight: bold;">500</span>: <span style="color: #50fa7b;">{</span>
            <span style="color: #ff79c6;">type</span>: <span style="color: #f1fa8c;">'object'</span>,
            properties: <span style="color: #ffb86c;">{</span>
                errors: <span style="color: #bd93f9;">{</span>
                    <span style="color: #ff79c6;">type</span>: <span style="color: #f1fa8c;">'array'</span>,
                    items: <span style="color: #f1fa8c;">{</span>
                        <span style="color: #ff79c6;">type</span>: <span style="color: #f1fa8c;">'string'</span>
                    <span style="color: #f1fa8c;">}</span>
                <span style="color: #bd93f9;">}</span>
            <span style="color: #ffb86c;">}</span>
        <span style="color: #50fa7b;">}</span>
    <span style="color: #ff79c6;">}</span>
<span style="color: #61bfff;">}</span>
</pre>
</div>

<p>
And finally a <i>handler</i> that is to be invoked with requests and expected to return responses.
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">export</span> <span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">handler</span> = <span style="color: #ff79c6;">async</span> <span style="color: #61bfff;">(</span>req: Request<span style="color: #61bfff;">)</span>: Promise&lt;<span style="color: #61bfff;">Result</span>&gt; <span style="color: #ff79c6;">=&gt;</span> <span style="color: #61bfff;">{</span>
    <span style="color: #ff79c6;">try</span> <span style="color: #ff79c6;">{</span>
        <span style="color: #ff79c6;">return</span> <span style="color: #50fa7b;">{</span>
            status: <span style="color: #ff5555; font-weight: bold;">200</span>,
            body: <span style="color: #ffb86c;">{</span>
                greetings: <span style="color: #f1fa8c;">`Hello ${name}`</span>
            <span style="color: #ffb86c;">}</span>
        <span style="color: #50fa7b;">}</span>
    <span style="color: #ff79c6;">}</span> <span style="color: #ff79c6;">catch</span> <span style="color: #ff79c6;">(</span>err<span style="color: #ff79c6;">)</span> <span style="color: #ff79c6;">{</span>
        <span style="color: #ff79c6;">return</span> <span style="color: #50fa7b;">{</span>
            status: <span style="color: #ff5555; font-weight: bold;">500</span>,
            body: <span style="color: #ffb86c;">{</span>
                errors: <span style="color: #bd93f9;">[</span>err.message<span style="color: #bd93f9;">]</span>
            <span style="color: #ffb86c;">}</span>
        <span style="color: #50fa7b;">}</span>
    <span style="color: #ff79c6;">}</span>
<span style="color: #61bfff;">}</span>
</pre>
</div>

<p>
Note how the auxiliary types <i>Request</i> and <i>Response</i> are not exported or imported which means
zero source-code dependency with platform API's. The request/response model follows the HTTP
protocol. HTTP is a stable and standard family of specs and is in the guts of every Rest service.
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">type</span> <span style="color: #61bfff;">Request</span> = <span style="color: #61bfff;">{</span>
    params: <span style="color: #ff79c6;">{</span>
        name: <span style="color: #ff79c6;">string</span>
    <span style="color: #ff79c6;">}</span>
<span style="color: #61bfff;">}</span>

<span style="color: #ff79c6;">type</span> <span style="color: #61bfff;">Result</span> = <span style="color: #61bfff;">{</span>
    status: <span style="color: #ff5555; font-weight: bold;">200</span>,
    body: <span style="color: #ff79c6;">{</span>
        greetings: <span style="color: #ff79c6;">string</span>
    <span style="color: #ff79c6;">}</span>
<span style="color: #61bfff;">}</span> | <span style="color: #61bfff;">{</span>
    status: <span style="color: #ff5555; font-weight: bold;">500</span>,
    body: <span style="color: #ff79c6;">{</span>
        errors: <span style="color: #ff79c6;">string</span><span style="color: #50fa7b;">[]</span>
    <span style="color: #ff79c6;">}</span>
<span style="color: #61bfff;">}</span>
</pre>
</div>

<p>
Then, the <i>minimum viable interface</i> for our newly born Rest module can be defined as
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">type</span> <span style="color: #61bfff;">RestMod</span>&lt;
    Query,
    Params,
    Headers,
    Body,
    Config <span style="color: #ff79c6;">extends</span> <span style="color: #ff79c6;">string</span>,
    Result,
&gt; = <span style="color: #61bfff;">{</span>
    url: <span style="color: #ff79c6;">string</span>,
    method: <span style="color: #f1fa8c;">'GET'</span> | <span style="color: #f1fa8c;">'POST'</span> | <span style="color: #f1fa8c;">'PUT'</span> | <span style="color: #f1fa8c;">'PATCH'</span> | <span style="color: #f1fa8c;">'DELETE'</span>,
    schema: RouteSchema&lt;<span style="color: #61bfff;">object</span>&gt;,
    config?: Record&lt;<span style="color: #61bfff;">Config</span>, <span style="color: #ff79c6;">string</span> | <span style="color: #61bfff;">undefined</span>&gt;,
    handler: <span style="color: #ff79c6;">(</span>
        req: RestRequest&lt;<span style="color: #61bfff;">Query</span>, <span style="color: #61bfff;">Params</span>, <span style="color: #61bfff;">Headers</span>, <span style="color: #61bfff;">Body</span>&gt;,
        cfg: Record&lt;<span style="color: #61bfff;">Config</span>, <span style="color: #ff79c6;">string</span>&gt;
    <span style="color: #ff79c6;">)</span> <span style="color: #ff79c6;">=&gt;</span> Promise&lt;<span style="color: #61bfff;">Result</span>&gt;
<span style="color: #61bfff;">}</span>;
</pre>
</div>

<p>
The complete implementation can be found in the following git <a href="https://github.com/drojas/morphic/blob/master/modules/rest/lib/morphic-rest.ts">repository</a>.
</p>

<p>
Now let's solve the boilerplate from the requirements we know given the module type definition. The first
chunk has to be about importing dependencies. In this case the implementation is based on a function that
takes a Rest module and returns a <i>fastify</i> plugin and the corresponding boilerplate code required to put them
to work.
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">import</span> fastify <span style="color: #ff79c6;">from</span> <span style="color: #f1fa8c;">'fastify'</span>;
<span style="color: #ff79c6;">import</span> <span style="color: #61bfff;">{</span> createFastifyPlugin <span style="color: #61bfff;">}</span> <span style="color: #ff79c6;">from</span> <span style="color: #f1fa8c;">'@frameless/rest'</span>;
<span style="color: #ff79c6;">import</span> config <span style="color: #ff79c6;">from</span> <span style="color: #f1fa8c;">'config'</span>;

</pre>
</div>

<p>
After the framework and libraries are imported let's import the actual Rest modules (one for this example)
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #6272a4;">//</span>
<span style="color: #6272a4;">// </span><span style="color: #6272a4;">import rest modules</span>
<span style="color: #6272a4;">//</span>
<span style="color: #ff79c6;">import</span> * <span style="color: #ff79c6;">as</span> morphicExamplesHelloRest <span style="color: #ff79c6;">from</span> <span style="color: #f1fa8c;">'@frameless-examples/hello-rest'</span>;
</pre>
</div>

<p>
Let's just borrow a fastify server for this example.
</p>

<div class="org-src-container">
<pre class="src src-typescript">
<span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">instance</span> = <span style="color: #50fa7b;">fastify</span><span style="color: #61bfff;">(</span><span style="color: #ff79c6;">{</span>
    logger: <span style="color: #ff79c6;">true</span>
<span style="color: #ff79c6;">}</span><span style="color: #61bfff;">)</span>;

</pre>
</div>

<p>
Now we need to add the routes from all modules to the server.
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #6272a4;">//</span>
<span style="color: #6272a4;">// </span><span style="color: #6272a4;">add base plugins for initialization</span>
<span style="color: #6272a4;">//</span>

<span style="color: #6272a4;">//</span>
<span style="color: #6272a4;">// </span><span style="color: #6272a4;">add rest modules to the service</span>
<span style="color: #6272a4;">//</span>
instance.<span style="color: #50fa7b;">register</span><span style="color: #61bfff;">(</span><span style="color: #50fa7b;">createFastifyPlugin</span><span style="color: #ff79c6;">(</span>morphicExamplesHelloRest, config<span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>;
</pre>
</div>

<p>
And let's finalize the boilerplate with the usual port configuration and server initialization.
</p>

<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #ff79c6;">const</span> <span style="color: #f8f8f2;">PORT</span> = config.<span style="color: #50fa7b;">has</span><span style="color: #61bfff;">(</span><span style="color: #f1fa8c;">'PORT'</span><span style="color: #61bfff;">)</span>
    ? <span style="color: #50fa7b;">parseInt</span><span style="color: #61bfff;">(</span>config.<span style="color: #ff79c6;">get</span><span style="color: #ff79c6;">(</span><span style="color: #f1fa8c;">'PORT'</span><span style="color: #ff79c6;">)</span>, <span style="color: #ff5555; font-weight: bold;">10</span><span style="color: #61bfff;">)</span>
    : <span style="color: #ff5555; font-weight: bold;">0</span>;

instance.<span style="color: #50fa7b;">listen</span><span style="color: #61bfff;">(</span>PORT, <span style="color: #ff79c6;">(</span>err: Error, address: <span style="color: #ff79c6;">string</span><span style="color: #ff79c6;">)</span> <span style="color: #ff79c6;">=&gt;</span> <span style="color: #ff79c6;">{</span>
    <span style="color: #ff79c6;">if</span> <span style="color: #50fa7b;">(</span>err<span style="color: #50fa7b;">)</span> <span style="color: #50fa7b;">{</span>
        <span style="color: #ff79c6;">throw</span> err;
    <span style="color: #50fa7b;">}</span>
    instance.log.<span style="color: #50fa7b;">info</span><span style="color: #50fa7b;">(</span><span style="color: #f1fa8c;">`server listening on ${address}`</span><span style="color: #50fa7b;">)</span>;
<span style="color: #ff79c6;">}</span><span style="color: #61bfff;">)</span>;
</pre>
</div>

<p>
This pattern allows your to provide <i>features as a service</i> implemented as a (platform) function of your modules.
The platform can provide by proxy any framework or library-like functionality including configurations, dependencies, scripts, etc.
This contributes to continuous improvement and agile goals because it means new developments on the platform can automatically be leveraged
by individual modules and teams without having to make code changes to each module.
</p>

<p>
Following, a couple of tech-oriented definitions for modularity from: <a href="https://en.wikipedia.org/wiki/Modularity">https://en.wikipedia.org/wiki/Modularity</a>
</p>
<blockquote>
<p>
In modular programming, modularity refers to the compartmentalization and interrelation of the parts of a software package.<br />
</p>

<p>
In software design, modularity refers to a logical partitioning of the "software design" that allows complex software to be manageable
for the purpose of implementation and maintenance. The logic of partitioning may be based on related functions, implementation
considerations, data links, or other criteria.
</p>
</blockquote>

<p>
One interesting aspect of the last definition is the idea the relationship between complexity and software being manageable is
and worth paying close attention to and perhaps explore with "biomimicry lenses".
</p>

<p>
Let's compare the previous definitions with a biological one from: <a href="https://en.wikipedia.org/wiki/Modularity_(biology)">https://en.wikipedia.org/wiki/Modularity_(biology)</a>
</p>
<blockquote>
<p>
Modularity refers to the ability of a system to organize discrete, individual units that can overall increase the efficiency of network
activity and, in a biological sense, facilitates selective forces upon the network. Modularity is observed in all model systems, and can
be studied at nearly every scale of biological organization, from molecular interactions all the way up to the whole organism.
</p>
</blockquote>

<p>
The ideas behind "to be manageable" from the tech-oriented definition and of "selective forces" from the biological one seem aligned with
the "shortest path" mentality of both nature and the agile movement within the tech industry.
</p>

<p>
Modular development pairs naturally with agile or any other paced or sprint oriented methodologies.
</p>
</div>
</div>

<div id="outline-container-org36b0aa2" class="outline-3">
<h3 id="org36b0aa2"><span class="section-number-3">3.1</span> <span class="todo TODO">TODO</span> MVP: Basic module systems</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<ul class="org-ul">
<li><a id="orgc14b8b6"></a><span class="done DONE">DONE</span> RPC<br />
<div class="outline-text-6" id="text-orgc14b8b6">
</div>
<ul class="org-ul">
<li><a id="orgc8d735e"></a><span class="done DONE">DONE</span> hygen rpc-mod new &#x2013;in examples &#x2013;name hello-rpc<br />
<div class="outline-text-7" id="text-orgc8d735e">
</div>
</li>
<li><a id="org2747f14"></a><span class="done DONE">DONE</span> hygen rpc-api new &#x2013;in examples &#x2013;name rpc-simple<br />
<div class="outline-text-7" id="text-org2747f14">
</div>
</li>
</ul>
</li>
<li><a id="org26519d1"></a><span class="done DONE">DONE</span> REST<br />
<div class="outline-text-6" id="text-org26519d1">
</div>
<ul class="org-ul">
<li><a id="org3b92291"></a><span class="done DONE">DONE</span> hygen rest-mod new &#x2013;in examples &#x2013;name hello-rest<br />
<div class="outline-text-7" id="text-org3b92291">
</div>
</li>
<li><a id="orgcf95a38"></a><span class="done DONE">DONE</span> hygen rest-api new &#x2013;in examples &#x2013;name rest-simple<br />
<div class="outline-text-7" id="text-orgcf95a38">
</div>
</li>
</ul>
</li>
<li><a id="org16ce925"></a><span class="todo TODO">TODO</span> Job<br /></li>
<li><a id="org77c1eb3"></a><span class="todo TODO">TODO</span> Cronjob<br /></li>
<li><a id="org2a75356"></a><span class="todo TODO">TODO</span> Worker (Queue consumer)<br /></li>
<li><a id="orgd934380"></a><span class="todo TODO">TODO</span> Events producer<br /></li>
<li><a id="org7e4940f"></a><span class="todo TODO">TODO</span> Events consumer<br /></li>
<li><a id="orgcf9f8b4"></a><span class="todo TODO">TODO</span> Database app example (MongoDB)<br /></li>
<li><a id="orgf941bb1"></a><span class="todo TODO">TODO</span> Instrumentation<br /></li>
<li><a id="orgdcb613f"></a><span class="todo TODO">TODO</span> Standarize: Bring your own framework<br /></li>
<li><a id="org3171461"></a><span class="todo TODO">TODO</span> Client codegen<br /></li>
</ul>
</div>

<div id="outline-container-org2a3ad98" class="outline-3">
<h3 id="org2a3ad98"><span class="section-number-3">3.2</span> Vision for v1.0</h3>
<div class="outline-text-3" id="text-3-2">
<p>
More systems and module models
</p>
</div>
<ul class="org-ul">
<li><a id="orgca0199e"></a><span class="todo TODO">TODO</span> Frontend components<br /></li>
<li><a id="org5162d2a"></a><span class="todo TODO">TODO</span> ETL processes<br /></li>
<li><a id="org97f8dfd"></a><span class="todo TODO">TODO</span> Stream processing<br /></li>
<li><a id="org1ebcbb9"></a><span class="todo TODO">TODO</span> Deployment codegen<br /></li>
</ul>
</div>
</div>

<div id="outline-container-org9bce83e" class="outline-2">
<h2 id="org9bce83e"><span class="section-number-2">4</span> Wishlist</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>HATEOAS</li>
<li>GraphQL</li>
<li>Auto partitioning</li>
<li>NPM Tarball Functor as a Service</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: David Rojas</p>
<p class="date">Created: 2020-02-08 Sat 14:16</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
